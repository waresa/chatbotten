{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/waris/Desktop/projects/gptboss/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"C:/Users/waris/Desktop/projects/gptboss/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Users/waris/Desktop/projects/gptboss/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/waris/Desktop/projects/gptboss/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'../App.css';import'../normal.css';import{useState}from'react';import SideMenu from'../components/SideMenu';import ChatBox from'../components/ChatBox';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Chat(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),chatLog=_useState4[0],setChatLog=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),ansatt=_useState6[0],setAnsatt=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),generator=_useState8[0],setGenerator=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isLoading=_useState10[0],setIsLoading=_useState10[1];function clearChat(){setChatLog([]);}function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var chatLogNew,messages,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();chatLogNew=[].concat(_toConsumableArray(chatLog),[{user:\"me\",message:\"\".concat(input)}]);setInput('');setChatLog(chatLogNew);setIsLoading(true);messages=chatLogNew.map(function(message){return message.message;});_context.next=8;return fetch('http://localhost:3080',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({message:messages,ansatt:\"\".concat(ansatt),generator:\"\".concat(generator)})});case 8:response=_context.sent;_context.next=11;return response.json();case 11:data=_context.sent;_context.next=14;return setChatLog([].concat(_toConsumableArray(chatLogNew),[{user:'gpt',message:data.message}]));case 14:setIsLoading(false);case 15:case\"end\":return _context.stop();}},_callee);}));return _handleSubmit.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(SideMenu,{ansatt:ansatt,setAnsatt:setAnsatt,generator:generator,setGenerator:setGenerator,clearChat:clearChat}),/*#__PURE__*/_jsx(ChatBox,{chatLog:chatLog,isLoading:isLoading,handleSubmit:handleSubmit,input:input,setInput:setInput,ansatt:ansatt,generator:generator})]});}export default Chat;","map":{"version":3,"names":["useState","SideMenu","ChatBox","Chat","input","setInput","chatLog","setChatLog","ansatt","setAnsatt","generator","setGenerator","isLoading","setIsLoading","clearChat","handleSubmit","e","preventDefault","chatLogNew","user","message","messages","map","fetch","method","headers","body","JSON","stringify","response","json","data"],"sources":["C:/Users/waris/Desktop/projects/gptboss/client/src/pages/Chat.jsx"],"sourcesContent":["\r\nimport '../App.css';\r\nimport '../normal.css';\r\nimport { useState }  from 'react';\r\nimport SideMenu from '../components/SideMenu';\r\nimport ChatBox from '../components/ChatBox';\r\n\r\n\r\n\r\n\r\nfunction Chat() {\r\n\r\n  const [input, setInput] = useState('');\r\n  const [chatLog, setChatLog] = useState([]);\r\n  const [ansatt, setAnsatt] = useState(\"\");\r\n  const [generator, setGenerator] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\nfunction clearChat() {\r\n  setChatLog([]);\r\n}\r\n\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n    let chatLogNew = [...chatLog, { user: \"me\", message: `${input}`}]\r\n    setInput('');\r\n    setChatLog(chatLogNew);\r\n    setIsLoading(true);\r\n\r\n    const messages = chatLogNew.map((message) => message.message);\r\n\r\n    const response = await fetch('http://localhost:3080', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ message: messages, ansatt: `${ansatt}`, generator: `${generator}`})\r\n    });\r\n    \r\n\r\n    const data = await response.json();\r\n    await setChatLog([...chatLogNew, { user: 'gpt', message: data.message }]);\r\n    setIsLoading(false);\r\n  }\r\n\r\n  return (\r\n    \r\n    <div className=\"App\">\r\n      <SideMenu ansatt={ansatt} setAnsatt={setAnsatt} generator={generator} setGenerator={setGenerator} clearChat={clearChat} />\r\n      <ChatBox chatLog={chatLog} isLoading={isLoading} handleSubmit={handleSubmit} input={input} setInput={setInput} ansatt={ansatt} generator={generator}  />\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n"],"mappings":"wiBACA,MAAO,YAAY,CACnB,MAAO,eAAe,CACtB,OAASA,QAAQ,KAAS,OAAO,CACjC,MAAOC,SAAQ,KAAM,wBAAwB,CAC7C,MAAOC,QAAO,KAAM,uBAAuB,CAAC,wFAK5C,QAASC,KAAI,EAAG,CAEd,cAA0BH,QAAQ,CAAC,EAAE,CAAC,wCAA/BI,KAAK,eAAEC,QAAQ,eACtB,eAA8BL,QAAQ,CAAC,EAAE,CAAC,yCAAnCM,OAAO,eAAEC,UAAU,eAC1B,eAA4BP,QAAQ,CAAC,EAAE,CAAC,yCAAjCQ,MAAM,eAAEC,SAAS,eACxB,eAAkCT,QAAQ,CAAC,EAAE,CAAC,yCAAvCU,SAAS,eAAEC,YAAY,eAC9B,eAAkCX,QAAQ,CAAC,KAAK,CAAC,0CAA1CY,SAAS,gBAAEC,YAAY,gBAEhC,QAASC,UAAS,EAAG,CACnBP,UAAU,CAAC,EAAE,CAAC,CAChB,CAAC,QAEgBQ,aAAY,kJAA3B,iBAA4BC,CAAC,yJAC3BA,CAAC,CAACC,cAAc,EAAE,CACdC,UAAU,8BAAOZ,OAAO,GAAE,CAAEa,IAAI,CAAE,IAAI,CAAEC,OAAO,WAAKhB,KAAK,CAAE,CAAC,GAChEC,QAAQ,CAAC,EAAE,CAAC,CACZE,UAAU,CAACW,UAAU,CAAC,CACtBL,YAAY,CAAC,IAAI,CAAC,CAEZQ,QAAQ,CAAGH,UAAU,CAACI,GAAG,CAAC,SAACF,OAAO,QAAKA,QAAO,CAACA,OAAO,GAAC,uBAEtCG,MAAK,CAAC,uBAAuB,CAAE,CACpDC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAER,OAAO,CAAEC,QAAQ,CAAEb,MAAM,WAAKA,MAAM,CAAE,CAAEE,SAAS,WAAKA,SAAS,CAAE,CAAC,CAC3F,CAAC,CAAC,QANImB,QAAQ,sCASKA,SAAQ,CAACC,IAAI,EAAE,SAA5BC,IAAI,sCACJxB,WAAU,8BAAKW,UAAU,GAAE,CAAEC,IAAI,CAAE,KAAK,CAAEC,OAAO,CAAEW,IAAI,CAACX,OAAQ,CAAC,GAAE,SACzEP,YAAY,CAAC,KAAK,CAAC,CAAC,sDACrB,+CAED,mBAEE,aAAK,SAAS,CAAC,KAAK,wBAClB,KAAC,QAAQ,EAAC,MAAM,CAAEL,MAAO,CAAC,SAAS,CAAEC,SAAU,CAAC,SAAS,CAAEC,SAAU,CAAC,YAAY,CAAEC,YAAa,CAAC,SAAS,CAAEG,SAAU,EAAG,cAC1H,KAAC,OAAO,EAAC,OAAO,CAAER,OAAQ,CAAC,SAAS,CAAEM,SAAU,CAAC,YAAY,CAAEG,YAAa,CAAC,KAAK,CAAEX,KAAM,CAAC,QAAQ,CAAEC,QAAS,CAAC,MAAM,CAAEG,MAAO,CAAC,SAAS,CAAEE,SAAU,EAAI,GAClJ,CAEZ,CAEA,cAAeP,KAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}